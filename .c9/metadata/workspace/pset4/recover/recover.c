{"filter":false,"title":"recover.c","tooltip":"/pset4/recover/recover.c","ace":{"folds":[],"scrolltop":640,"scrollleft":0,"selection":{"start":{"row":78,"column":1},"end":{"row":78,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":39,"state":"start","mode":"ace/mode/c_cpp"}},"hash":"0f49d19e468e0adc3f4d9353e2267e183b28fa11","undoManager":{"mark":38,"position":38,"stack":[[{"start":{"row":78,"column":51},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":1168},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":79,"column":4},"end":{"row":80,"column":0},"action":"insert","lines":["                    fclose(img);",""],"id":1169}],[{"start":{"row":79,"column":36},"end":{"row":80,"column":0},"action":"remove","lines":["",""],"id":1170}],[{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"remove","lines":["    "],"id":1171}],[{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"remove","lines":["    "],"id":1172}],[{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"remove","lines":["    "],"id":1173}],[{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"remove","lines":["    "],"id":1174}],[{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"remove","lines":["    "],"id":1175}],[{"start":{"row":79,"column":16},"end":{"row":80,"column":0},"action":"insert","lines":["",""],"id":1176},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"insert","lines":["    "]},{"start":{"row":80,"column":4},"end":{"row":80,"column":5},"action":"insert","lines":["f"]},{"start":{"row":80,"column":5},"end":{"row":80,"column":6},"action":"insert","lines":["c"]},{"start":{"row":80,"column":6},"end":{"row":80,"column":7},"action":"insert","lines":["l"]},{"start":{"row":80,"column":7},"end":{"row":80,"column":8},"action":"insert","lines":["o"]},{"start":{"row":80,"column":8},"end":{"row":80,"column":9},"action":"insert","lines":["s"]},{"start":{"row":80,"column":9},"end":{"row":80,"column":10},"action":"insert","lines":["e"]}],[{"start":{"row":80,"column":10},"end":{"row":80,"column":12},"action":"insert","lines":["()"],"id":1177}],[{"start":{"row":80,"column":11},"end":{"row":80,"column":12},"action":"insert","lines":["i"],"id":1178},{"start":{"row":80,"column":12},"end":{"row":80,"column":13},"action":"insert","lines":["n"]},{"start":{"row":80,"column":13},"end":{"row":80,"column":14},"action":"insert","lines":["p"]},{"start":{"row":80,"column":14},"end":{"row":80,"column":15},"action":"insert","lines":["t"]}],[{"start":{"row":80,"column":14},"end":{"row":80,"column":15},"action":"remove","lines":["t"],"id":1179},{"start":{"row":80,"column":13},"end":{"row":80,"column":14},"action":"remove","lines":["p"]}],[{"start":{"row":80,"column":13},"end":{"row":80,"column":14},"action":"insert","lines":["p"],"id":1180},{"start":{"row":80,"column":14},"end":{"row":80,"column":15},"action":"insert","lines":["r"]},{"start":{"row":80,"column":15},"end":{"row":80,"column":16},"action":"insert","lines":["t"]}],[{"start":{"row":80,"column":15},"end":{"row":80,"column":16},"action":"remove","lines":["t"],"id":1181},{"start":{"row":80,"column":14},"end":{"row":80,"column":15},"action":"remove","lines":["r"]}],[{"start":{"row":80,"column":14},"end":{"row":80,"column":15},"action":"insert","lines":["t"],"id":1182},{"start":{"row":80,"column":15},"end":{"row":80,"column":16},"action":"insert","lines":["r"]}],[{"start":{"row":80,"column":17},"end":{"row":80,"column":18},"action":"insert","lines":[";"],"id":1183}],[{"start":{"row":63,"column":31},"end":{"row":63,"column":45},"action":"remove","lines":["sizeof(buffer)"],"id":1184},{"start":{"row":63,"column":31},"end":{"row":63,"column":32},"action":"insert","lines":["5"]},{"start":{"row":63,"column":32},"end":{"row":63,"column":33},"action":"insert","lines":["1"]},{"start":{"row":63,"column":33},"end":{"row":63,"column":34},"action":"insert","lines":["2"]}],[{"start":{"row":63,"column":23},"end":{"row":63,"column":24},"action":"insert","lines":["&"],"id":1185}],[{"start":{"row":75,"column":34},"end":{"row":76,"column":0},"action":"insert","lines":["",""],"id":1191},{"start":{"row":76,"column":0},"end":{"row":76,"column":16},"action":"insert","lines":["                "]},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":["e"]},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["l"]},{"start":{"row":76,"column":18},"end":{"row":76,"column":19},"action":"insert","lines":["s"]},{"start":{"row":76,"column":19},"end":{"row":76,"column":20},"action":"insert","lines":["e"]}],[{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"insert","lines":[" "],"id":1192}],[{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"remove","lines":[" "],"id":1193}],[{"start":{"row":76,"column":20},"end":{"row":77,"column":0},"action":"insert","lines":["",""],"id":1194},{"start":{"row":77,"column":0},"end":{"row":77,"column":16},"action":"insert","lines":["                "]},{"start":{"row":77,"column":16},"end":{"row":77,"column":17},"action":"insert","lines":["{"]}],[{"start":{"row":77,"column":17},"end":{"row":79,"column":17},"action":"insert","lines":["","                    ","                }"],"id":1195}],[{"start":{"row":78,"column":20},"end":{"row":78,"column":21},"action":"insert","lines":["f"],"id":1196},{"start":{"row":78,"column":21},"end":{"row":78,"column":22},"action":"insert","lines":["p"]},{"start":{"row":78,"column":22},"end":{"row":78,"column":23},"action":"insert","lines":["r"]},{"start":{"row":78,"column":23},"end":{"row":78,"column":24},"action":"insert","lines":["i"]},{"start":{"row":78,"column":24},"end":{"row":78,"column":25},"action":"insert","lines":["n"]},{"start":{"row":78,"column":25},"end":{"row":78,"column":26},"action":"insert","lines":["t"]},{"start":{"row":78,"column":26},"end":{"row":78,"column":27},"action":"insert","lines":["f"]}],[{"start":{"row":78,"column":27},"end":{"row":78,"column":29},"action":"insert","lines":["()"],"id":1197}],[{"start":{"row":78,"column":28},"end":{"row":78,"column":29},"action":"insert","lines":["s"],"id":1198},{"start":{"row":78,"column":29},"end":{"row":78,"column":30},"action":"insert","lines":["t"]},{"start":{"row":78,"column":30},"end":{"row":78,"column":31},"action":"insert","lines":["d"]},{"start":{"row":78,"column":31},"end":{"row":78,"column":32},"action":"insert","lines":["e"]},{"start":{"row":78,"column":32},"end":{"row":78,"column":33},"action":"insert","lines":["r"]},{"start":{"row":78,"column":33},"end":{"row":78,"column":34},"action":"insert","lines":["r"]},{"start":{"row":78,"column":34},"end":{"row":78,"column":35},"action":"insert","lines":[","]}],[{"start":{"row":78,"column":35},"end":{"row":78,"column":36},"action":"insert","lines":[" "],"id":1199}],[{"start":{"row":78,"column":36},"end":{"row":78,"column":38},"action":"insert","lines":["\"\""],"id":1200}],[{"start":{"row":78,"column":37},"end":{"row":78,"column":38},"action":"insert","lines":["s"],"id":1201},{"start":{"row":78,"column":38},"end":{"row":78,"column":39},"action":"insert","lines":["k"]},{"start":{"row":78,"column":39},"end":{"row":78,"column":40},"action":"insert","lines":["i"]},{"start":{"row":78,"column":40},"end":{"row":78,"column":41},"action":"insert","lines":["p"]},{"start":{"row":78,"column":41},"end":{"row":78,"column":42},"action":"insert","lines":["p"]},{"start":{"row":78,"column":42},"end":{"row":78,"column":43},"action":"insert","lines":["i"]},{"start":{"row":78,"column":43},"end":{"row":78,"column":44},"action":"insert","lines":["n"]},{"start":{"row":78,"column":44},"end":{"row":78,"column":45},"action":"insert","lines":["g"]},{"start":{"row":78,"column":45},"end":{"row":78,"column":46},"action":"insert","lines":["."]},{"start":{"row":78,"column":46},"end":{"row":78,"column":47},"action":"insert","lines":["."]}],[{"start":{"row":78,"column":49},"end":{"row":78,"column":50},"action":"insert","lines":[";"],"id":1202}],[{"start":{"row":0,"column":0},"end":{"row":87,"column":1},"action":"remove","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    FILE *img;","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // do until end of card","    do","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                // if already found a JPEG","                if (alreadyFoundJpeg == 1)","                {","                    // close the previous JPEG file","                    fclose(img);","                    fprintf(stderr, \"closed img\\n\");","                    // increment filenumber","                    filenumber += 1;","                    fprintf(stderr, \"incrementing filenumber\\n\");","                }","                else","                {","                    alreadyFoundJpeg = 1;","                    fprintf(stderr, \"making alreadyfoundjpeg = 1\\n\");","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                fprintf(stderr, \"creating file %03i.jpg \\n\", filenumber);","                // open the new file","                img = fopen(filename, \"w\");","                fprintf(stderr, \"opening new file\\n\");","                // write to the file","                fwrite(&buffer, 512, 1, img);","                fprintf(stderr, \"writing..\");","            }","","            // if not start of new JPEG","            else","            {","                if (alreadyFoundJpeg == 1)","                {","                    fwrite(buffer, sizeof(buffer), 1, img);","                    fprintf(stderr, \"writing..\");","                }","                // else do nothing","                else","                {","                    fprintf(stderr, \"skipping..\");","                }","            }","        }","    } while (fread(buffer, 1, 512, inptr) != 0x00);","    fclose(img);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"],"id":1225},{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"insert","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open $s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(img);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"]}],[{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"remove","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open $s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(img);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"],"id":1226},{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"insert","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open $s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(outptr);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"]}],[{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"remove","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open $s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(outptr);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"],"id":1227},{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"insert","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(outptr);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"]}],[{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"remove","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    int alreadyFoundJpeg = 0;","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(outptr);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"],"id":1228},{"start":{"row":0,"column":0},"end":{"row":77,"column":1},"action":"insert","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(outptr);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"]}],[{"start":{"row":50,"column":43},"end":{"row":50,"column":44},"action":"insert","lines":["b"],"id":1229}],[{"start":{"row":0,"column":0},"end":{"row":77,"column":1},"action":"remove","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"wb\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    fclose(outptr);","    fclose(inptr);","    fprintf(stderr, \"done!\\n\");","    return 0;","}"],"id":1230},{"start":{"row":0,"column":0},"end":{"row":82,"column":1},"action":"insert","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    if (outptr != NULL)","    {","        fclose(outptr);","    }","    if (inptr != NULL)","    {","        fclose(inptr);","    }","    return 0;","}"]}],[{"start":{"row":0,"column":0},"end":{"row":82,"column":1},"action":"remove","lines":["// Recovers JPEGs","#include <cs50.h>","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512];","    int filenumber = 0;","    char filename[8];","    // initialize blank outptr file","    FILE *outptr = NULL;","    // remember file name","    char *infile = argv[1];","    // open card file","    FILE *inptr = fopen(infile, \"r\");","","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", infile);","        return 2;","    }","","    // while loop until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        // read the file","        fread(buffer, 512, 1, inptr);","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (NULL != outptr)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    if (outptr != NULL)","    {","        fclose(outptr);","    }","    if (inptr != NULL)","    {","        fclose(inptr);","    }","    return 0;","}"],"id":1231},{"start":{"row":0,"column":0},"end":{"row":63,"column":1},"action":"insert","lines":["#include <stdio.h>","#include <stdlib.h>","","int main(void)","{               ","","unsigned char buffer[512] = {0};","char jpgName[8] = {0};","int jpgcounter = 0;","FILE* outptr = NULL;","","// open memory card file","FILE* inptr = fopen(\"card.raw\", \"rb\");","if (inptr == NULL)","{","    printf(\"Could not open %s.\\n\", \"card.raw\");","    return 1;","}   ","","// Start reading    ","while(fread(buffer, sizeof(buffer), 1, inptr) == 1)","{                                   ","","        // Find beginning of jpg","        if(buffer[0] == 0xff && buffer[1] == 0xd8 && buffer[2] == 0xff && (buffer[3] == 0xe0 || buffer[3] == 0xe1))","        {   ","            if(NULL!=outptr)                   ","            {","              fclose(outptr);","              outptr=NULL;","            }","","            // Create filename for jpegs","            sprintf(jpgName,\"%03d.jpg\", jpgcounter);","","            // Open a new file with name defined by sprintf","            outptr = fopen(jpgName, \"wb\");         ","            if (NULL == outptr)","            {","              printf(\"Could not open %s.\\n\", jpgName);","              return 1;","            }                     ","","            // Write into the outfile from buffer","            fwrite(buffer, sizeof(buffer), 1, outptr);","","            // Increment counter for jpegs","            jpgcounter++;","         }","          else ","         {","             // Continue writing to old file if it is not beginning of file","             if(NULL!=outptr)","                fwrite(buffer, sizeof(buffer), 1, outptr);                              ","         }   ","    }","","    if(NULL!=outptr)","      fclose(outptr);","    if(NULL!=inptr)","      fclose(inptr);","","    return 0;   ","}"]}],[{"start":{"row":0,"column":0},"end":{"row":63,"column":1},"action":"remove","lines":["#include <stdio.h>","#include <stdlib.h>","","int main(void)","{               ","","unsigned char buffer[512] = {0};","char jpgName[8] = {0};","int jpgcounter = 0;","FILE* outptr = NULL;","","// open memory card file","FILE* inptr = fopen(\"card.raw\", \"rb\");","if (inptr == NULL)","{","    printf(\"Could not open %s.\\n\", \"card.raw\");","    return 1;","}   ","","// Start reading    ","while(fread(buffer, sizeof(buffer), 1, inptr) == 1)","{                                   ","","        // Find beginning of jpg","        if(buffer[0] == 0xff && buffer[1] == 0xd8 && buffer[2] == 0xff && (buffer[3] == 0xe0 || buffer[3] == 0xe1))","        {   ","            if(NULL!=outptr)                   ","            {","              fclose(outptr);","              outptr=NULL;","            }","","            // Create filename for jpegs","            sprintf(jpgName,\"%03d.jpg\", jpgcounter);","","            // Open a new file with name defined by sprintf","            outptr = fopen(jpgName, \"wb\");         ","            if (NULL == outptr)","            {","              printf(\"Could not open %s.\\n\", jpgName);","              return 1;","            }                     ","","            // Write into the outfile from buffer","            fwrite(buffer, sizeof(buffer), 1, outptr);","","            // Increment counter for jpegs","            jpgcounter++;","         }","          else ","         {","             // Continue writing to old file if it is not beginning of file","             if(NULL!=outptr)","                fwrite(buffer, sizeof(buffer), 1, outptr);                              ","         }   ","    }","","    if(NULL!=outptr)","      fclose(outptr);","    if(NULL!=inptr)","      fclose(inptr);","","    return 0;   ","}"],"id":1233},{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"insert","lines":["// Recovers JPEGs","","#include <stdio.h>","#include <stdlib.h>","","int main(int argc, char *argv[])","{","    // check for correct usage","    if (argc != 2)","    {","        fprintf(stderr, \"Usage: filename\\n\");","        return 1;","    }","    // declare variables","    unsigned char buffer[512] = {0};","    char filename[8] = {0};","    int filenumber = 0;","    FILE *outptr = NULL;","","    // open card file","    FILE *inptr = fopen(argv[1], \"r\");","    if (inptr == NULL)","    {","        fprintf(stderr, \"Could not open %s.\\n\", argv[1]);","        return 2;","    }","","    // read until end of card","    while (fread(buffer, sizeof(buffer), 1, inptr) == 1)","    {","        {","            // if start of new JPEG","            if (buffer[0] == 0xff &&","                buffer[1] == 0xd8 &&","                buffer[2] == 0xff &&","                (buffer[3] & 0xf0) == 0xe0)","            {","                if (outptr != NULL)","                {","                    fclose(outptr);","                    outptr = NULL;","                }","                // create new file","                sprintf(filename, \"%03i.jpg\", filenumber);","                ","                // open the new file","                outptr = fopen(filename, \"w\");","                if (outptr == NULL)","                {","                    fprintf(stderr, \"Failed to open %s.\\n\", filename);","                    return 1;","                }","                // write to the file","                fwrite(buffer, sizeof(buffer), 1, outptr);","","                // increment filenumber","                filenumber++;","            }","            // if not start of new JPEG","            else","            {","                if (outptr != NULL)","                {","                    fwrite(buffer, sizeof(buffer), 1, outptr);","                }","                // else do nothing","            }","        }","    };","    if (outptr != NULL)","    {","        fclose(outptr);","    }","    if (inptr != NULL)","    {","        fclose(inptr);","    }","    return 0;","}"]}],[{"start":{"row":44,"column":0},"end":{"row":44,"column":16},"action":"remove","lines":["                "],"id":1234}]]},"timestamp":1530999808908}